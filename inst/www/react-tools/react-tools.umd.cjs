(function(u,c){typeof exports=="object"&&typeof module<"u"?c(require("react"),require("react-dom"),require("shiny"),require("jquery")):typeof define=="function"&&define.amd?define(["react","react-dom","shiny","jquery"],c):(u=typeof globalThis<"u"?globalThis:u||self,c(u.React,u.ReactDOM,u.Shiny,u.$))})(this,function(u,c,h,s){"use strict";function d(n,t){if(typeof t=="string")return t;if(t.name[0]===t.name[0].toUpperCase()&&!n.hasOwnProperty(t.name))throw new Error("Unknown component: "+t.name);for(let i in t.attribs)m(t.attribs[i])&&(t.attribs[i]=d(n,t.attribs[i]));for(var a=n.hasOwnProperty(t.name)?n[t.name]:t.name,r=[a,t.attribs],e=0;e<t.children.length;e++)r.push(d(n,t.children[e]));return React.createElement.apply(React,r)}const p={widthProperty:"width",heightProperty:"height",appendPx:!1,renderOnResize:!1};function w(n){var t={};for(var a in p)t[a]=p[a];for(var a in n){if(!p.hasOwnProperty(a))throw new Error("Unrecognized option: "+a);t[a]=n[a]}return t}function l(n,t){return t.appendPx?n+"px":n}function m(n){return typeof n=="object"&&n.hasOwnProperty("name")&&n.hasOwnProperty("attribs")&&n.hasOwnProperty("children")}function O(n,t,a,r){var e=w(r);window.HTMLWidgets.widget({name:n,type:t,factory:function(i,o,y){var g,x={},b=function(f){e.renderOnResize&&(typeof f.tag=="object"&&(f.tag.attribs[e.widthProperty]=l(o),f.tag.attribs[e.heightProperty]=l(y)),g=f),this.instance.component=ReactDOM.render(d(a,f.tag),i)};return{instance:x,renderValue:b,resize:function(f,R){e.renderOnResize&&(o=f,y=R,b(g))}}}})}function P(n,{configuration:t,value:a}){let r=!1;t!==void 0&&(this.setInputConfiguration(n,t),r=!0),a!==void 0&&(this.setInputValue(n,a),r=!0),r&&(this.getCallback(n)(),this.render(n))}const V={receiveMessage:P,type:!1,ratePolicy:null};function I(n,t,a,r){r=Object.assign({},V,r),h.inputBindings.register(new class extends h.InputBinding{find(e){return s(e).find(n)}getValue(e){return this.getInputValue(e)}setValue(e,i,o=!1){s(e).data("callback")!==void 0&&(this.setInputValue(e,i),this.getCallback(e)(o),this.render(e))}initialize(e){s(e).data("value",JSON.parse(s(e).next().text())),s(e).data("configuration",JSON.parse(s(e).next().next().text()))}subscribe(e,i){s(e).data("callback",i),this.render(e)}unsubscribe(e){c.render(null,e)}receiveMessage(e,i){r.receiveMessage.call(this,e,i)}getType(e){if(typeof r.type=="function")return r.type.call(this,e);if(r.type===!1||typeof r.type=="string")return r.type;throw new Error("options.type must be false, a string, or a function")}getRatePolicy(){return r.ratePolicy}getInputValue(e){return s(e).data("value")}setInputValue(e,i){s(e).data("value",i)}getInputConfiguration(e){return s(e).data("configuration")}setInputConfiguration(e,i){s(e).data("configuration",i)}getCallback(e){return s(e).data("callback")}render(e){const i=u.createElement(a,{configuration:this.getInputConfiguration(e),value:this.getValue(e),setValue:this.setValue.bind(this,e),el:e});c.render(i,e)}},t)}window.reactR={reactShinyInput:I,reactWidget:O,hydrate:d}});
